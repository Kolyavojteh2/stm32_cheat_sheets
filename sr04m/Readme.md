Налаштування таймера (шаблон)
Тобі потрібен TIM з частотою лічильника 1 MHz:
Prescaler = (TIM_CLK / 1_000_000) - 1
CounterMode = UP
Period = 0xFFFF (16-bit) або 0xFFFFFFFF (32-bit)
Після MX_TIMx_Init() виклич HAL_TIM_Base_Start(&htimx);

Практичні поради для надійності:
Робити TRIG 20 µs, а не 10 µs (часто з цими waterproof платами реально стабільніше).
Не запускати вимір частіше, ніж раз на 50 ms.
Якщо бачиш “дивну” поведінку (ECHO не пульсує, а стрімить) — це майже завжди mode pads/перемички або “клон із сюрпризом”.